# mypy configuration for IEC custom component
# Based on Home Assistant's mypy configuration

[mypy]
python_version = 3.10
show_error_codes = true
strict = true
explicit_package_bases = true

# Allow untyped decorators (needed for Home Assistant decorators)
allow_untyped_decorators = true

# Ignore missing imports for external libraries without type stubs
ignore_missing_imports = true

# Follow imports for better type checking
follow_imports = normal

# Set the project root to avoid module name conflicts
namespace_packages = true
mypy_path = .

# Show error context
show_error_context = true
show_column_numbers = true

# Warn about common issues
warn_return_any = true
warn_unused_ignores = true
warn_unused_configs = true
warn_redundant_casts = true
warn_no_return = true
warn_unreachable = true

# Enable optional error codes
enable_error_code = ignore-without-code,redundant-self,truthy-iterable,possibly-undefined,explicit-override

# Don't check tests folder
exclude = tests/

# Check untyped functions too
check_untyped_defs = true

# Disallow implicit optional (require explicit None)
no_implicit_optional = true

# Disallow incomplete defs
disallow_incomplete_defs = true

# Disallow untyped calls
disallow_untyped_calls = false

# Disallow untyped defs
disallow_untyped_defs = true

# Disable subclassing Any errors for Home Assistant classes without type stubs
disable_error_code = misc

[custom_components.iec.*]
disallow_untyped_defs = true

[mypy-homeassistant.*]
ignore_missing_imports = true

[mypy-iec_api.*]
ignore_missing_imports = true
